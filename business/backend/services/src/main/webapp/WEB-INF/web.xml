<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
	<display-name>openpaas webservices</display-name>
	

	<filter>
		<filter-name>Shiro</filter-name>
		<filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>Shiro</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>


	<!-- see http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-ConfiguringJAXRSservicesincontainerwithoutSpring -->
		<servlet>
			<servlet-name>CXFServlet</servlet-name>
			<display-name>CXF Servlet</display-name>
			<servlet-class>
				org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet
			</servlet-class>

			<!--configure web services class -->

			<init-param>
				<param-name>jaxrs.serviceClasses</param-name>
				<param-value>
					com.linagora.openpaas.backend.webservice.MessageService,
					com.linagora.openpaas.backend.webservice.UserService
				</param-value>
			</init-param>

			<init-param>
				<param-name>jaxrs.providers</param-name>
				<param-value>org.codehaus.jackson.jaxrs.JacksonJsonProvider</param-value>
			</init-param>


			<!-- registers extension mappings -->
			<init-param>
				<param-name>jaxrs.extensions</param-name>
				<param-value>
					xml=application/xml
					json=application/json
				</param-value>
			</init-param>


			<load-on-startup>1</load-on-startup>
		</servlet>

		<servlet-mapping>
			<servlet-name>CXFServlet</servlet-name>
			<url-pattern>/rest/*</url-pattern>
		</servlet-mapping>


		<listener>
			<listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
		</listener>

</web-app>                                                        

